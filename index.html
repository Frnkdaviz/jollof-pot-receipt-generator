<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional receipt generator for Jollof Pot Restaurant with automatic tax calculations for Ghana Revenue Authority compliance.">
    <meta name="keywords" content="receipt generator, Ghana restaurant, VAT calculator, Jollof Pot, receipt maker">
    <meta name="author" content="Jollof Pot Restaurant">
    <meta property="og:title" content="Jollof Pot - Receipt Generator">
    <meta property="og:description" content="Generate professional receipts with automatic tax calculations">
    <meta property="og:type" content="website">
    <title>Jollof Pot - Receipt Generator</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='80'>üç≤</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #C8102E;
            --secondary: #FCD116;
            --dark: #1a1a1a;
            --light: #f5f1e8;
            --accent: #006B3F;
            --text: #2d2d2d;
            --border: #d4c5a9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f1e8 0%, #e8dcc8 100%);
            min-height: 100vh;
            padding: 2rem;
            color: var(--text);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-section, .receipt-section {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .subtitle {
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ghana-flag {
            display: inline-flex;
            gap: 2px;
            margin-right: 0.3rem;
        }

        .flag-stripe {
            width: 4px;
            height: 12px;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--dark);
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(200, 16, 46, 0.1);
        }

        select {
            cursor: pointer;
            background-color: white;
        }

        .items-container {
            margin-top: 1rem;
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            background: var(--light);
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 0.75rem;
            margin-bottom: 1rem;
            align-items: end;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .remove-btn {
            padding: 0.75rem 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #a00d25;
            transform: scale(1.05);
        }

        .add-btn {
            width: 100%;
            padding: 0.875rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .add-btn:hover {
            background: #005530;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 107, 63, 0.3);
        }

        .generate-btn {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, var(--primary) 0%, #a00d25 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(200, 16, 46, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(200, 16, 46, 0.4);
        }

        .receipt {
            background: white;
            font-family: 'Courier New', monospace;
            padding: 2.5rem;
            border: 3px solid var(--dark);
            border-radius: 4px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .receipt-watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            opacity: 0.03;
            pointer-events: none;
            z-index: 0;
        }

        .receipt-header {
            text-align: center;
            border-bottom: 2px dashed var(--dark);
            padding-bottom: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .restaurant-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .receipt-info {
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .receipt-body {
            margin: 1.5rem 0;
            position: relative;
            z-index: 1;
        }

        .receipt-table {
            width: 100%;
            margin: 1rem 0;
        }

        .receipt-table th {
            text-align: left;
            border-bottom: 1px solid var(--dark);
            padding-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .receipt-table td {
            padding: 0.5rem 0;
            font-size: 0.9rem;
        }

        .receipt-table .qty {
            width: 50px;
            text-align: center;
        }

        .receipt-table .price {
            text-align: right;
            width: 100px;
        }

        .divider {
            border-top: 1px dashed var(--dark);
            margin: 1rem 0;
        }

        .totals {
            margin-top: 1.5rem;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            font-size: 0.9rem;
        }

        .total-row.tax {
            color: #666;
            font-size: 0.85rem;
        }

        .total-row.grand-total {
            font-weight: bold;
            font-size: 1.1rem;
            border-top: 2px solid var(--dark);
            padding-top: 0.75rem;
            margin-top: 0.75rem;
        }

        .receipt-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px dashed var(--dark);
            font-size: 0.85rem;
            line-height: 1.8;
            position: relative;
            z-index: 1;
        }

        .tax-info {
            background: var(--light);
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            font-size: 0.8rem;
            line-height: 1.6;
        }

        .download-btn {
            width: 100%;
            padding: 1rem;
            background: var(--dark);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            margin-top: 1.5rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .download-btn:hover {
            background: #000;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .print-btn {
            width: 100%;
            padding: 1rem;
            background: white;
            color: var(--dark);
            border: 2px solid var(--dark);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            margin-top: 0.75rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .print-btn:hover {
            background: var(--dark);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                grid-template-columns: 1fr;
            }
            .input-section, .download-btn, .print-btn {
                display: none;
            }
            .receipt {
                box-shadow: none;
                border: 2px solid var(--dark);
            }
        }

        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        input[readonly], select[disabled] {
            background-color: var(--light);
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Input Section -->
        <div class="input-section">
            <h1>Receipt Generator</h1>
            <p class="subtitle">
                <span class="ghana-flag">
                    <span class="flag-stripe" style="background: #C8102E;"></span>
                    <span class="flag-stripe" style="background: #FCD116;"></span>
                    <span class="flag-stripe" style="background: #006B3F;"></span>
                </span>
                For Jollof Pot Restaurant
            </p>

            <div class="form-group">
                <label>Customer Name (Optional)</label>
                <input type="text" id="customerName" placeholder="Enter customer name">
            </div>

            <div class="form-group">
                <label>Receipt Date & Time</label>
                <input type="datetime-local" id="receiptDate">
            </div>

            <h2>Order Items</h2>
            <div class="items-container" id="itemsContainer">
                <div class="item-row">
                    <div>
                        <label>Item</label>
                        <select class="item-select" onchange="handleMenuSelect(this)">
                            <option value="">-- Select Item --</option>
                            <optgroup label="Main Dishes">
                                <option value="Banku with Okro (Regular)|70">Banku with Okro (Regular) - GH‚Çµ 70</option>
                                <option value="Plain Rice with Palava Sauce & Fish|75">Plain Rice with Palava Sauce & Fish - GH‚Çµ 75</option>
                                <option value="Kenkey with Fish & Pepper|60">Kenkey with Fish & Pepper - GH‚Çµ 60</option>
                                <option value="Plain Rice with Fish|70">Plain Rice with Fish - GH‚Çµ 70</option>
                                <option value="Fried Rice with Chicken Sauce|110">Fried Rice with Chicken Sauce - GH‚Çµ 110</option>
                                <option value="Jollof with Meat Sauce|100">Jollof with Meat Sauce - GH‚Çµ 100</option>
                                <option value="Jollof with Beef Sauce|100">Jollof with Beef Sauce - GH‚Çµ 100</option>
                                <option value="Waakye with Fish|80">Waakye with Fish - GH‚Çµ 80</option>
                                <option value="Waakye with Egg|80">Waakye with Egg - GH‚Çµ 80</option>
                                <option value="Waakye with Chicken|90">Waakye with Chicken - GH‚Çµ 90</option>
                                <option value="Banku & Tilapia|85">Banku & Tilapia - GH‚Çµ 85</option>
                                <option value="Jollof Rice with Chicken|110">Jollof Rice with Chicken - GH‚Çµ 110</option>
                                <option value="Jollof Rice with Fish|110">Jollof Rice with Fish - GH‚Çµ 110</option>
                            </optgroup>
                            <optgroup label="Drinks">
                                <option value="Coca-Cola can (330 ml)|12">Coca-Cola can (330 ml) - GH‚Çµ 12</option>
                                <option value="Fanta can (330 ml)|12">Fanta can (330 ml) - GH‚Çµ 12</option>
                            </optgroup>
                            <optgroup label="Pastries">
                                <option value="Creamy Doughnuts|35">Creamy Doughnuts - GH‚Çµ 35</option>
                                <option value="Pancake|40">Pancake - GH‚Çµ 40</option>
                                <option value="Croissant Basket|80">Croissant Basket - GH‚Çµ 80</option>
                            </optgroup>
                            <option value="custom">-- Custom Item --</option>
                        </select>
                    </div>
                    <div>
                        <label>Qty</label>
                        <input type="number" class="item-qty" value="1" min="1">
                    </div>
                    <div>
                        <label>Price (GH‚Çµ)</label>
                        <input type="number" class="item-price" value="0" min="0" step="0.01">
                    </div>
                    <button class="remove-btn" onclick="removeItem(this)" style="display: none;">‚úï</button>
                </div>
            </div>
            <button class="add-btn" onclick="addItem()">+ Add Item</button>

            <button class="generate-btn" onclick="generateReceipt()">Generate Receipt</button>
        </div>

        <!-- Receipt Section -->
        <div class="receipt-section">
            <div class="receipt" id="receipt">
                <!-- Food Doodle Watermark -->
                <svg class="receipt-watermark" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Pizza slice -->
                    <path d="M100 100 L140 60 A56 56 0 0 1 140 140 Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="115" cy="85" r="3" fill="currentColor"/>
                    <circle cx="125" cy="105" r="3" fill="currentColor"/>
                    <circle cx="120" cy="120" r="3" fill="currentColor"/>
                    
                    <!-- Burger -->
                    <path d="M50 80 Q50 75 55 75 L85 75 Q90 75 90 80" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <rect x="48" y="80" width="44" height="8" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
                    <rect x="50" y="88" width="40" height="6" fill="none" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M50 94 L90 94 Q92 94 92 96 L92 100 Q92 102 90 102 L50 102 Q48 102 48 100 L48 96 Q48 94 50 94" fill="none" stroke="currentColor" stroke-width="2"/>
                    <line x1="55" y1="82" x2="55" y2="84" stroke="currentColor" stroke-width="1"/>
                    <line x1="62" y1="82" x2="62" y2="84" stroke="currentColor" stroke-width="1"/>
                    <line x1="70" y1="82" x2="70" y2="84" stroke="currentColor" stroke-width="1"/>
                    <line x1="78" y1="82" x2="78" y2="84" stroke="currentColor" stroke-width="1"/>
                    <line x1="85" y1="82" x2="85" y2="84" stroke="currentColor" stroke-width="1"/>
                    
                    <!-- Coffee cup -->
                    <path d="M140 150 L135 170 Q135 175 140 175 L160 175 Q165 175 165 170 L160 150 Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M165 157 Q172 157 172 162 Q172 167 165 167" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="138" y1="150" x2="162" y2="150" stroke="currentColor" stroke-width="2"/>
                    <path d="M145 145 Q150 140 155 145" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    
                    <!-- Ice cream cone -->
                    <path d="M60 140 L55 160 L65 160 Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    <circle cx="60" cy="138" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                    <circle cx="60" cy="130" r="6" fill="none" stroke="currentColor" stroke-width="2"/>
                    <line x1="56" y1="145" x2="56" y2="158" stroke="currentColor" stroke-width="1"/>
                    <line x1="60" y1="143" x2="60" y2="160" stroke="currentColor" stroke-width="1"/>
                    <line x1="64" y1="145" x2="64" y2="158" stroke="currentColor" stroke-width="1"/>
                    
                    <!-- Donut -->
                    <circle cx="100" cy="40" r="12" fill="none" stroke="currentColor" stroke-width="2"/>
                    <circle cx="100" cy="40" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
                    <circle cx="95" cy="35" r="1.5" fill="currentColor"/>
                    <circle cx="105" cy="37" r="1.5" fill="currentColor"/>
                    <circle cx="98" cy="45" r="1.5" fill="currentColor"/>
                    <circle cx="107" cy="43" r="1.5" fill="currentColor"/>
                    
                    <!-- Fork -->
                    <line x1="30" y1="120" x2="30" y2="145" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="26" y1="120" x2="26" y2="135" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="34" y1="120" x2="34" y2="135" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    
                    <!-- Spoon -->
                    <ellipse cx="175" cy="35" rx="4" ry="6" fill="none" stroke="currentColor" stroke-width="2"/>
                    <line x1="175" y1="41" x2="175" y2="60" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>

                <div class="receipt-header">
                    <div class="restaurant-name">Jollof Pot</div>
                    <div class="receipt-info">
                        <div>jollofport11@gmail.com</div>
                        <div style="margin-top: 0.75rem;">
                            <strong>Receipt No:</strong> <span id="displayReceiptNo">---</span><br>
                            <strong>Date:</strong> <span id="displayDate">---</span><br>
                            <span id="displayCustomer"></span>
                        </div>
                    </div>
                </div>

                <div class="receipt-body">
                    <table class="receipt-table">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th class="qty">Qty</th>
                                <th class="price">Price</th>
                                <th class="price">Total</th>
                            </tr>
                        </thead>
                        <tbody id="receiptItems">
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 2rem; color: #999;">
                                    No items added yet
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="divider"></div>

                    <div class="totals">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">GH‚Çµ 0.00</span>
                        </div>
                        <div class="total-row tax">
                            <span>VAT (15%):</span>
                            <span id="vat">GH‚Çµ 0.00</span>
                        </div>
                        <div class="total-row tax">
                            <span>NHIL (2.5%):</span>
                            <span id="nhil">GH‚Çµ 0.00</span>
                        </div>
                        <div class="total-row tax">
                            <span>GETFund Levy (2.5%):</span>
                            <span id="getfund">GH‚Çµ 0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>TOTAL:</span>
                            <span id="grandTotal">GH‚Çµ 0.00</span>
                        </div>
                    </div>

                    <div class="tax-info">
                        <strong>Tax Breakdown (Total: 20%)</strong><br>
                        VAT at 15% as per Value Added Tax Act, 2025<br>
                        NHIL (National Health Insurance Levy) at 2.5%<br>
                        GETFund (Ghana Education Trust Fund) at 2.5%
                    </div>
                </div>

                <div class="receipt-footer">
                    <strong>Thank you for your patronage!</strong><br>
                    Please visit again<br>
                    <div style="margin-top: 0.75rem; font-size: 0.75rem;">
                        VAT Registered | Ghana Revenue Authority
                    </div>
                </div>
            </div>

            <button class="download-btn" onclick="downloadReceipt()">
                <span style="font-size: 1.2rem;">üì•</span> Download Receipt (PDF)
            </button>
            
            <button class="print-btn" onclick="printReceipt()">
                <span style="font-size: 1.2rem;">üñ®Ô∏è</span> Print Receipt
            </button>
        </div>
    </div>

    <script>
        function handleMenuSelect(select) {
            const row = select.closest('.item-row');
            const priceInput = row.querySelector('.item-price');
            const value = select.value;

            if (value === 'custom' || value === '') {
                priceInput.value = 0;
                priceInput.removeAttribute('readonly');
                priceInput.style.backgroundColor = 'white';
                priceInput.style.cursor = 'text';
            } else {
                const [name, price] = value.split('|');
                priceInput.value = price;
                priceInput.setAttribute('readonly', 'readonly');
                priceInput.style.backgroundColor = '#f5f1e8';
                priceInput.style.cursor = 'not-allowed';
            }
        }

        function addItem() {
            const container = document.getElementById('itemsContainer');
            const itemRow = document.createElement('div');
            itemRow.className = 'item-row';
            itemRow.innerHTML = `
                <div>
                    <label>Item</label>
                    <select class="item-select" onchange="handleMenuSelect(this)">
                        <option value="">-- Select Item --</option>
                        <optgroup label="Main Dishes">
                            <option value="Banku with Okro (Regular)|70">Banku with Okro (Regular) - GH‚Çµ 70</option>
                            <option value="Plain Rice with Palava Sauce & Fish|75">Plain Rice with Palava Sauce & Fish - GH‚Çµ 75</option>
                            <option value="Kenkey with Fish & Pepper|60">Kenkey with Fish & Pepper - GH‚Çµ 60</option>
                            <option value="Plain Rice with Fish|70">Plain Rice with Fish - GH‚Çµ 70</option>
                            <option value="Fried Rice with Chicken Sauce|110">Fried Rice with Chicken Sauce - GH‚Çµ 110</option>
                            <option value="Jollof with Meat Sauce|100">Jollof with Meat Sauce - GH‚Çµ 100</option>
                            <option value="Jollof with Beef Sauce|100">Jollof with Beef Sauce - GH‚Çµ 100</option>
                            <option value="Waakye with Fish|80">Waakye with Fish - GH‚Çµ 80</option>
                            <option value="Waakye with Egg|80">Waakye with Egg - GH‚Çµ 80</option>
                            <option value="Waakye with Chicken|90">Waakye with Chicken - GH‚Çµ 90</option>
                            <option value="Banku & Tilapia|85">Banku & Tilapia - GH‚Çµ 85</option>
                            <option value="Jollof Rice with Chicken|110">Jollof Rice with Chicken - GH‚Çµ 110</option>
                            <option value="Jollof Rice with Fish|110">Jollof Rice with Fish - GH‚Çµ 110</option>
                        </optgroup>
                        <optgroup label="Drinks">
                            <option value="Coca-Cola can (330 ml)|12">Coca-Cola can (330 ml) - GH‚Çµ 12</option>
                            <option value="Fanta can (330 ml)|12">Fanta can (330 ml) - GH‚Çµ 12</option>
                        </optgroup>
                        <optgroup label="Pastries">
                            <option value="Creamy Doughnuts|35">Creamy Doughnuts - GH‚Çµ 35</option>
                            <option value="Pancake|40">Pancake - GH‚Çµ 40</option>
                            <option value="Croissant Basket|80">Croissant Basket - GH‚Çµ 80</option>
                        </optgroup>
                        <option value="custom">-- Custom Item --</option>
                    </select>
                </div>
                <div>
                    <label>Qty</label>
                    <input type="number" class="item-qty" value="1" min="1">
                </div>
                <div>
                    <label>Price (GH‚Çµ)</label>
                    <input type="number" class="item-price" value="0" min="0" step="0.01">
                </div>
                <button class="remove-btn" onclick="removeItem(this)">‚úï</button>
            `;
            container.appendChild(itemRow);
            updateRemoveButtons();
        }

        function removeItem(button) {
            button.closest('.item-row').remove();
            updateRemoveButtons();
        }

        function updateRemoveButtons() {
            const items = document.querySelectorAll('.item-row');
            items.forEach((item, index) => {
                const btn = item.querySelector('.remove-btn');
                if (items.length > 1) {
                    btn.style.display = 'block';
                } else {
                    btn.style.display = 'none';
                }
            });
        }

        function generateReceipt() {
            const customerName = document.getElementById('customerName').value;
            const receiptNo = Math.floor(1000000 + Math.random() * 9000000).toString();
            
            // Get custom date or use current date
            const dateInput = document.getElementById('receiptDate');
            let receiptDate;
            if (dateInput.value) {
                receiptDate = new Date(dateInput.value);
            } else {
                receiptDate = new Date();
            }

            // Update receipt header
            document.getElementById('displayReceiptNo').textContent = receiptNo;
            document.getElementById('displayDate').textContent = receiptDate.toLocaleString('en-GB', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            if (customerName) {
                document.getElementById('displayCustomer').innerHTML = `<strong>Customer:</strong> ${customerName}`;
            } else {
                document.getElementById('displayCustomer').innerHTML = '';
            }

            // Get items
            const itemRows = document.querySelectorAll('.item-row');
            let subtotal = 0;
            let itemsHTML = '';

            itemRows.forEach(row => {
                const select = row.querySelector('.item-select');
                const selectedValue = select.value;
                let name = '';
                
                if (selectedValue && selectedValue !== 'custom') {
                    name = selectedValue.split('|')[0];
                }
                
                const qty = parseFloat(row.querySelector('.item-qty').value) || 0;
                const price = parseFloat(row.querySelector('.item-price').value) || 0;
                const total = qty * price;

                if (name && qty > 0 && price > 0) {
                    subtotal += total;
                    itemsHTML += `
                        <tr>
                            <td>${name}</td>
                            <td class="qty">${qty}</td>
                            <td class="price">GH‚Çµ ${price.toFixed(2)}</td>
                            <td class="price">GH‚Çµ ${total.toFixed(2)}</td>
                        </tr>
                    `;
                }
            });

            if (itemsHTML) {
                document.getElementById('receiptItems').innerHTML = itemsHTML;
            } else {
                document.getElementById('receiptItems').innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 2rem; color: #999;">
                            No valid items to display
                        </td>
                    </tr>
                `;
            }

            // Calculate taxes (Ghana VAT structure)
            const vat = subtotal * 0.15;        // VAT 15%
            const nhil = subtotal * 0.025;      // NHIL 2.5%
            const getfund = subtotal * 0.025;   // GETFund 2.5%
            const grandTotal = subtotal + vat + nhil + getfund;

            // Update totals
            document.getElementById('subtotal').textContent = `GH‚Çµ ${subtotal.toFixed(2)}`;
            document.getElementById('vat').textContent = `GH‚Çµ ${vat.toFixed(2)}`;
            document.getElementById('nhil').textContent = `GH‚Çµ ${nhil.toFixed(2)}`;
            document.getElementById('getfund').textContent = `GH‚Çµ ${getfund.toFixed(2)}`;
            document.getElementById('grandTotal').textContent = `GH‚Çµ ${grandTotal.toFixed(2)}`;
        }

        function downloadReceipt() {
            const receipt = document.getElementById('receipt');
            const receiptNo = document.getElementById('displayReceiptNo').textContent;
            
            // Use html2canvas to capture the receipt
            html2canvas(receipt, {
                scale: 2,
                useCORS: true,
                logging: false,
                backgroundColor: '#ffffff',
                windowWidth: receipt.scrollWidth,
                windowHeight: receipt.scrollHeight
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                
                // Create PDF with jsPDF
                const { jsPDF } = window.jspdf;
                
                // Calculate dimensions
                const imgWidth = 190; // A4 width in mm minus margins
                const pageHeight = 277; // A4 height in mm minus margins
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                // Calculate how many pages we need
                let heightLeft = imgHeight;
                let position = 10; // Top margin
                
                // Create PDF with proper size
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                // Add first page
                pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                // Add additional pages if needed
                while (heightLeft > 0) {
                    position = heightLeft - imgHeight + 10; // Add negative offset
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                pdf.save(`Jollof-Pot-Receipt-${receiptNo}.pdf`);
            }).catch(error => {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again or use Print option.');
            });
        }

        function printReceipt() {
            window.print();
        }

        // Initialize date input with current date/time
        window.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            
            document.getElementById('receiptDate').value = `${year}-${month}-${day}T${hours}:${minutes}`;
        });

        // Initialize
        updateRemoveButtons();
    </script>
</body>
</html>
